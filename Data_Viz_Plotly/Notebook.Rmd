---
title: "Dataviz mit Plotly PL Data"
output: html_notebook
---

## Fragestellung: "Die Manschafft, die zur Halbzeit vorne liegt, gewinnt mit einer 75% Chance auch das Spiel. Falls zur Halbzeit unentschieden ist, gewinnt eher das Heimteam."


Dafür nehmen wir den Datacamp Datensatz [Soccer Data](https://app.datacamp.com/workspace/datasets/dataset-python-soccer)

Als Einführung werden wir auf Datacamp folgende Kurse durchgehen:

- [Interactive Data Visualization with plotly](https://app.datacamp.com/learn/courses/interactive-data-visualization-with-plotly-in-r)

- [Intermediate Interactive Data Visualization with plotly](https://app.datacamp.com/learn/courses/interactive-data-visualization-with-plotly-in-r)

```{r}
# Bibliotheken importieren
library("plotly")
library("plyr")
library("dplyr")
```

```{r}
# List files in Data folder
files <- list.files(path="./Data/", pattern=NULL, all.files=FALSE, full.names=TRUE)

# Create DataFrame with all csv from 2015-2019
df <- ldply(.data = files, .fun = read.csv)

# View entire DataFrame in R Studio
#View(df)

```

```{r}
group_by_referee <- aggregate(
                    x = df$Referee,
                    by = list(df$Referee),
                    FUN = function(x) length(unique(x)))
```

```{r}
htr_table <- df %>%
	count(HTR)

ftr_table <- df %>%
	count(FTR)

Results = c("Away", "Draw", "Home")
HT_count <- c(htr_table$n)
FT_count <- c(ftr_table$n)

df_results <- data.frame(Results, HT_count, FT_count)

fig <- plot_ly(
  df_results, x = ~Results, y = ~HT_count, type = 'bar', name = 'Half Time Score') %>% 
  add_trace(y = ~FT_count, name = 'Full Time Score') %>%
  layout(yaxis = list(title = 'Count'), barmode = 'group')

fig

```
